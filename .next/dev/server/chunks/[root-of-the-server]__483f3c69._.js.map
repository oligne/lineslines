{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/ENSAAMA/03_WORK/web_RELATIONS/web_lineslines/lib/turso.js"],"sourcesContent":["import { createClient } from '@libsql/client';\n\n// Connexion à Turso\nexport const turso = createClient({\n  url: process.env.TURSO_DATABASE_URL,\n  authToken: process.env.TURSO_AUTH_TOKEN,\n});\n"],"names":[],"mappings":";;;;AAAA;;;;;;AAGO,MAAM,QAAQ,IAAA,6MAAY,EAAC;IAChC,KAAK,QAAQ,GAAG,CAAC,kBAAkB;IACnC,WAAW,QAAQ,GAAG,CAAC,gBAAgB;AACzC"}},
    {"offset": {"line": 63, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/ENSAAMA/03_WORK/web_RELATIONS/web_lineslines/app/api/users/%5Bid%5D/route.js"],"sourcesContent":["import { turso } from '../../../../lib/turso';\n\nexport async function PATCH(request, context) {\n  const body = await request.json();\n  const params = await context.params;\n  const id = typeof params === 'object' && 'id' in params ? params.id : params;\n\n  if (body.pseudo !== undefined) {\n    await turso.execute({\n      sql: 'UPDATE users SET pseudo = ? WHERE id = ?',\n      args: [body.pseudo, id],\n    });\n  } else if (body.last_seen !== undefined) {\n    await turso.execute({\n      sql: 'UPDATE users SET last_seen = ? WHERE id = ?',\n      args: [body.last_seen, id],\n    });\n  } else {\n    return new Response(JSON.stringify({ error: 'Aucune donnée à mettre à jour.' }), { status: 400 });\n  }\n\n  const result = await turso.execute({\n    sql: 'SELECT * FROM users WHERE id = ?',\n    args: [id],\n  });\n  return Response.json(result.rows[0]);\n}\n"],"names":[],"mappings":";;;;AAAA;;;;;;AAEO,eAAe,MAAM,OAAO,EAAE,OAAO;IAC1C,MAAM,OAAO,MAAM,QAAQ,IAAI;IAC/B,MAAM,SAAS,MAAM,QAAQ,MAAM;IACnC,MAAM,KAAK,OAAO,WAAW,YAAY,QAAQ,SAAS,OAAO,EAAE,GAAG;IAEtE,IAAI,KAAK,MAAM,KAAK,WAAW;QAC7B,MAAM,uHAAK,CAAC,OAAO,CAAC;YAClB,KAAK;YACL,MAAM;gBAAC,KAAK,MAAM;gBAAE;aAAG;QACzB;IACF,OAAO,IAAI,KAAK,SAAS,KAAK,WAAW;QACvC,MAAM,uHAAK,CAAC,OAAO,CAAC;YAClB,KAAK;YACL,MAAM;gBAAC,KAAK,SAAS;gBAAE;aAAG;QAC5B;IACF,OAAO;QACL,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC;YAAE,OAAO;QAAiC,IAAI;YAAE,QAAQ;QAAI;IACjG;IAEA,MAAM,SAAS,MAAM,uHAAK,CAAC,OAAO,CAAC;QACjC,KAAK;QACL,MAAM;YAAC;SAAG;IACZ;IACA,OAAO,SAAS,IAAI,CAAC,OAAO,IAAI,CAAC,EAAE;AACrC"}}]
}