{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/ENSAAMA/03_WORK/web_RELATIONS/web_lineslines/lib/turso.js"],"sourcesContent":["import { createClient } from '@libsql/client';\n\n// Connexion à Turso\nexport const turso = createClient({\n  url: process.env.TURSO_DATABASE_URL,\n  authToken: process.env.TURSO_AUTH_TOKEN,\n});\n"],"names":[],"mappings":";;;;AAAA;;;;;;AAGO,MAAM,QAAQ,IAAA,6MAAY,EAAC;IAChC,KAAK,QAAQ,GAAG,CAAC,kBAAkB;IACnC,WAAW,QAAQ,GAAG,CAAC,gBAAgB;AACzC"}},
    {"offset": {"line": 63, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/ENSAAMA/03_WORK/web_RELATIONS/web_lineslines/app/api/relations/route.js"],"sourcesContent":["import { turso } from '../../../lib/turso';\n\n// GET: retourne toutes les relations\nexport async function GET() {\n  const result = await turso.execute('SELECT * FROM relations');\n  return Response.json(result.rows);\n}\n\n// POST: crée une relation entre deux users\nexport async function POST(request) {\n  const { user1_id, user2_id } = await request.json();\n  if (!user1_id || !user2_id || user1_id === user2_id) {\n    return new Response(JSON.stringify({ error: 'user1_id et user2_id requis et différents.' }), { status: 400 });\n  }\n  // Toujours stocker dans l'ordre croissant pour unicité\n  const [a, b] = user1_id < user2_id ? [user1_id, user2_id] : [user2_id, user1_id];\n  try {\n    await turso.execute({\n      sql: 'INSERT OR IGNORE INTO relations (user1_id, user2_id) VALUES (?, ?)',\n      args: [a, b],\n    });\n    const result = await turso.execute({\n      sql: 'SELECT * FROM relations WHERE user1_id = ? AND user2_id = ?',\n      args: [a, b],\n    });\n    return Response.json(result.rows[0]);\n  } catch (e) {\n    return new Response(JSON.stringify({ error: e.message }), { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;;;;;;AAGO,eAAe;IACpB,MAAM,SAAS,MAAM,uHAAK,CAAC,OAAO,CAAC;IACnC,OAAO,SAAS,IAAI,CAAC,OAAO,IAAI;AAClC;AAGO,eAAe,KAAK,OAAO;IAChC,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,GAAG,MAAM,QAAQ,IAAI;IACjD,IAAI,CAAC,YAAY,CAAC,YAAY,aAAa,UAAU;QACnD,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC;YAAE,OAAO;QAA6C,IAAI;YAAE,QAAQ;QAAI;IAC7G;IACA,uDAAuD;IACvD,MAAM,CAAC,GAAG,EAAE,GAAG,WAAW,WAAW;QAAC;QAAU;KAAS,GAAG;QAAC;QAAU;KAAS;IAChF,IAAI;QACF,MAAM,uHAAK,CAAC,OAAO,CAAC;YAClB,KAAK;YACL,MAAM;gBAAC;gBAAG;aAAE;QACd;QACA,MAAM,SAAS,MAAM,uHAAK,CAAC,OAAO,CAAC;YACjC,KAAK;YACL,MAAM;gBAAC;gBAAG;aAAE;QACd;QACA,OAAO,SAAS,IAAI,CAAC,OAAO,IAAI,CAAC,EAAE;IACrC,EAAE,OAAO,GAAG;QACV,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC;YAAE,OAAO,EAAE,OAAO;QAAC,IAAI;YAAE,QAAQ;QAAI;IAC1E;AACF"}}]
}