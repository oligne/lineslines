{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/ENSAAMA/03_WORK/web_RELATIONS/web_lineslines/app/components/FocusGraph.tsx"],"sourcesContent":["\"use client\"\n\nimport {useEffect, useRef, useState} from \"react\";\nimport ForceGraph3D, { ForceGraphMethods } from \"react-force-graph-3d\";\nimport * as THREE from \"three\";\n\nfunction FocusGraph({data, userIp, onUserNodeClick}) {\n    const fgRef = useRef<ForceGraphMethods>(null);\n    const [graphData, setGraphData] = useState({nodes: [], links: []});\n    const [editingId, setEditingId] = useState(null);\n    const [editValue, setEditValue] = useState(\"\");\n    const [caretVisible, setCaretVisible] = useState(true);\n    const [dimensions, setDimensions] = useState({ width: 800, height: 600 });\n    const [selectedNode, setSelectedNode] = useState(null);\n    // Keywords state local pour √©dition (pour ton node)\n    const [keywordEdit, setKeywordEdit] = useState(\"\");\n    // Fen√™tre de personnalisation en bas √† droite pour son propre point\n    const [showCustomize, setShowCustomize] = useState(false);\n\n    // Resize listener pour canvas plein √©cran\n    useEffect(() => {\n        function handleResize() {\n            setDimensions({ width: window.innerWidth, height: window.innerHeight });\n        }\n        handleResize();\n        window.addEventListener('resize', handleResize);\n        return () => window.removeEventListener('resize', handleResize);\n    }, []);\n\n    // Trouver l'id du node de l'utilisateur courant\n    const myNodeId = graphData.nodes.find(n => n.ip === userIp)?.id;\n\n    // Pas de position forc√©e : on laisse 3D ForceGraph placer les nodes\n    useEffect(() => {\n        try {\n            let parsed = JSON.parse(data);\n            setGraphData(parsed);\n        } catch {\n            setGraphData({nodes: [], links: []});\n        }\n    }, [data]);\n\n    // Toujours cadrer tous les points √† l'√©cran apr√®s chaque changement de graphData\n    useEffect(() => {\n        if (fgRef.current) {\n            fgRef.current.zoomToFit(0, 10); // padding r√©duit √† 10px\n        }\n    }, [graphData]);\n\n    // Ajuste la force selon le nombre de nodes (encore plus dense)\n    useEffect(() => {\n        if (!fgRef.current) return;\n        const n = graphData.nodes.length || 1;\n\n        // Distance cam√©ra dynamique, zoom plus fort si peu de points\n        const z = Math.max(-100, Math.min(200, n * 25));\n        fgRef.current.cameraPosition({ x: 0, y: 0, z }, { x: 0, y: 0, z: 0 }, 0);\n\n\n        // Force dynamique, r√©pulsion tr√®s faible\n        const charge = fgRef.current.d3Force('charge');\n        if (charge) charge.strength(-Math.max(2, 8 - n));\n        const collide = fgRef.current.d3Force('collide');\n        if (collide) {\n            collide.strength(1);\n            collide.radius(Math.max(2, 8 - n));\n        }\n    }, [graphData]);\n\n    // Caret clignotant : toggle toutes les 300ms, sans toucher au graph\n    useEffect(() => {\n        const interval = setInterval(() => {\n            setCaretVisible(v => !v);\n        }, 300);\n        return () => clearInterval(interval);\n    }, []);\n\n    // Fermer le profil si on clique dans le vide\n    useEffect(() => {\n        function handleClick(e) {\n            // Si le clic n'est pas dans le profil ni sur un node\n            if (!e.target.closest('.profile-popup')) setSelectedNode(null);\n        }\n        window.addEventListener('mousedown', handleClick);\n        return () => window.removeEventListener('mousedown', handleClick);\n    }, []);\n\n    // Custom node: point + nom gros + caret clignotant noir UNIQUEMENT sur le node courant (toujours, m√™me hors √©dition)\n    function nodeThreeObject(node) {\n        const isMe = node.id === myNodeId;\n        const isEditing = editingId === node.id;\n        const canvas = document.createElement(\"canvas\");\n        canvas.width = 520;\n        canvas.height = 160;\n        const ctx = canvas.getContext(\"2d\");\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        // Fond transparent (pas de fillRect blanc)\n        // ctx.fillStyle = \"rgba(255,255,255,1)\"; // supprim√©\n        // ctx.fillRect(0, 0, canvas.width, canvas.height); // supprim√©\n        // D√©calage horizontal pour aligner le point avec le lien\n        const decal = 20;\n        ctx.beginPath();\n        ctx.arc(40, 60, 28, 0, 2 * Math.PI); // cercle centr√©\n        ctx.fillStyle = isMe ? \"#e22\" : \"#111\";\n        ctx.shadowColor = '#888';\n        ctx.shadowBlur = 8;\n        ctx.fill();\n        // --- PSEUDO: font size auto-fit ---\n        let fontSize = 54;\n        const label = isEditing ? editValue : (node.label || node.pseudo || node.id);\n        ctx.font = `bold ${fontSize}px Menlo, monospace`;\n        let textWidth = ctx.measureText(`/user/${label}`).width;\n        while (textWidth > 410 && fontSize > 24) { // 410px max for text, min font 24px\n            fontSize -= 2;\n            ctx.font = `bold ${fontSize}px Menlo, monospace`;\n            textWidth = ctx.measureText(`/user/${label}`).width;\n        }\n        ctx.fillStyle = \"#111\";\n        ctx.textAlign = \"left\";\n        ctx.textBaseline = \"middle\";\n        ctx.fillText(`/user/${label}`, 90, 64);\n        // Caret clignotant noir UNIQUEMENT sur le node courant (toujours)\n        if (isMe && caretVisible) {\n            const caretTextWidth = ctx.measureText(`/user/${label}`).width;\n            ctx.fillStyle = '#111';\n            ctx.fillRect(90 + caretTextWidth + 6, 35, 4, 58);\n        }\n        // Affiche/√©dite les mots-cl√©s sous le pseudo (grosse ligne)\n        const keywords = node.keywords || [];\n        ctx.font = \"32px Menlo, monospace\";\n        let x = 90;\n        const y = 120;\n        // Affichage des mots-cl√©s s√©par√©s par des virgules\n        keywords.forEach((kw, i) => {\n            ctx.fillStyle = isMe ? \"#e22\" : \"#444\";\n            ctx.fillText(`#${kw}${i < keywords.length - 1 ? ',' : ''}` , x, y);\n            // Croix de suppression si c'est moi (affichage visuel seulement)\n            if (isMe) {\n                ctx.save();\n                ctx.strokeStyle = \"#e22\";\n                ctx.lineWidth = 3;\n                const crossX = x + ctx.measureText(`#${kw}${i < keywords.length - 1 ? ',' : ''}`).width + 18;\n                const crossY = y - 12;\n                ctx.beginPath();\n                ctx.moveTo(crossX, crossY);\n                ctx.lineTo(crossX + 16, crossY + 24);\n                ctx.moveTo(crossX + 16, crossY);\n                ctx.lineTo(crossX, crossY + 24);\n                ctx.stroke();\n                ctx.restore();\n            }\n            x += ctx.measureText(`#${kw}${i < keywords.length - 1 ? ',' : ''}`).width + (isMe ? 50 : 36);\n        });\n        // Champ d'ajout si c'est moi et <3 keywords (affichage visuel seulement)\n        if (isMe && keywords.length < 3) {\n            ctx.fillStyle = \"#aaa\";\n            ctx.fillText(\"+ mot-cl√©\", x, y);\n        }\n        const texture = new THREE.CanvasTexture(canvas);\n        const material = new THREE.SpriteMaterial({map: texture});\n        material.transparent = true;\n        material.alphaTest = 0.05;\n        const sprite = new THREE.Sprite(material);\n        sprite.scale.set(22, 7, 1);\n        sprite.center.set(40/520, 0.60); // centre du cercle, vertical ajust√©\n        return sprite;\n    }\n\n    function handleNodeClick(node) {\n        if (node.ip === userIp) {\n            setEditingId(node.id);\n            setEditValue(node.label || node.pseudo || node.id);\n            setSelectedNode(null); // Masque le popup classique\n            setKeywordEdit(\"\");\n            setShowCustomize(true); // Affiche la fen√™tre profil perso\n        } else {\n            setEditingId(null);\n            setSelectedNode(null);\n            setShowCustomize(false);\n            if (onUserNodeClick) onUserNodeClick(node);\n        }\n    }\n\n    // Edition du pseudo sur clic (uniquement sur son node)\n    useEffect(() => {\n        if (!editingId || !fgRef.current) return;\n        function onKeyDown(e) {\n            if (e.key === \"Enter\") handleInputBlurOrEnter();\n            else if (e.key === \"Escape\") setEditingId(null);\n            else if (e.key.length === 1) setEditValue(v => v + e.key);\n            else if (e.key === \"Backspace\") setEditValue(v => v.slice(0, -1));\n        }\n        window.addEventListener(\"keydown\", onKeyDown);\n        return () => window.removeEventListener(\"keydown\", onKeyDown);\n    }, [editingId, editValue]);\n\n    async function handleInputBlurOrEnter() {\n        if (editingId !== null) {\n            // Save to API\n            try {\n                await fetch(`/api/users/${editingId}`, {\n                    method: 'PATCH',\n                    body: JSON.stringify({ pseudo: editValue }),\n                    headers: { 'Content-Type': 'application/json' },\n                });\n            } catch (e) {\n                // Optionally handle error\n            }\n            setGraphData(gd => ({\n                ...gd,\n                nodes: gd.nodes.map(n => n.id === editingId ? {...n, label: editValue} : n)\n            }));\n            setEditingId(null);\n        }\n    }\n\n    // Keywords helpers\n    function getKeywords(node) {\n        return node.keywords || [];\n    }\n    async function handleKeywordAdd() {\n        if (!keywordEdit.trim() || !selectedNode) return;\n        const newKeywords = [...(getKeywords(selectedNode)), keywordEdit.trim()].slice(0, 3);\n        try {\n            await fetch(`/api/users/${selectedNode.id}`, {\n                method: 'PATCH',\n                body: JSON.stringify({ keywords: newKeywords }),\n                headers: { 'Content-Type': 'application/json' },\n            });\n        } catch {}\n        setGraphData(gd => ({\n            ...gd,\n            nodes: gd.nodes.map(n =>\n                n.id === selectedNode.id\n                    ? { ...n, keywords: newKeywords }\n                    : n\n            )\n        }));\n        setKeywordEdit(\"\");\n    }\n    async function handleKeywordRemove(idx) {\n        if (!selectedNode) return;\n        const newKeywords = (getKeywords(selectedNode) || []).filter((_, i) => i !== idx);\n        try {\n            await fetch(`/api/users/${selectedNode.id}`, {\n                method: 'PATCH',\n                body: JSON.stringify({ keywords: newKeywords }),\n                headers: { 'Content-Type': 'application/json' },\n            });\n        } catch {}\n        setGraphData(gd => ({\n            ...gd,\n            nodes: gd.nodes.map(n =>\n                n.id === selectedNode.id\n                    ? { ...n, keywords: newKeywords }\n                    : n\n            )\n        }));\n    }\n\n    return (\n        <>\n            <div style={{ position: 'fixed', inset: 0, zIndex: 0, pointerEvents: 'auto' }}>\n                <ForceGraph3D\n                    ref={fgRef}\n                    graphData={graphData}\n                    nodeAutoColorBy=\"group\"\n                    onNodeClick={handleNodeClick}\n                    nodeThreeObject={nodeThreeObject}\n                    linkColor={() => '#111'}\n                    linkOpacity={0.95}\n                    linkWidth={0.1}\n                    backgroundColor=\"rgba(0,0,0,0)\"\n                    width={dimensions.width}\n                    height={dimensions.height}\n                />\n            </div>\n            {/* Popup classique pour les autres nodes uniquement */}\n            {selectedNode && (\n                <div\n                    className=\"profile-popup\"\n                    style={{\n                        position: 'fixed',\n                        top: 30,\n                        left: 12,\n                        width: 320,\n                        minWidth: 320,\n                        maxWidth: 320,\n                        minHeight: 120,\n                        background: 'rgba(255,255,255,0.98)',\n                        borderRadius: 16,\n                        boxShadow: '0 2px 12px rgba(0,0,0,0.08)',\n                        zIndex: 1001,\n                        padding: '28px 24px',\n                        fontFamily: 'Menlo, monospace',\n                        fontSize: 20,\n                        color: '#111',\n                        display: 'flex',\n                        flexDirection: 'column',\n                        alignItems: 'flex-start',\n                        boxSizing: 'border-box',\n                        gap: 0\n                    }}\n                >\n                    <div style={{ fontWeight: 700, marginBottom: 12, fontSize: 24 }}>/user/{selectedNode.label || selectedNode.pseudo || selectedNode.id}</div>\n                    <div style={{ marginBottom: 30, fontSize: 18, width: '100%' }}>\n                        <span style={{ fontWeight: 600, fontSize: 18, marginRight: 10 }}>mots-cl√©s :</span>\n                        {getKeywords(selectedNode).map((kw, i) => (\n                            <span key={i} style={{\n                                display: 'inline-block',\n                                background: '#eee',\n                                color: '#111',\n                                borderRadius: 8,\n                                padding: '4px 16px',\n                                marginRight: i < getKeywords(selectedNode).length - 1 ? 2 : 10,\n                                marginBottom: 2,\n                                fontSize: 18,\n                                fontWeight: 600,\n                                cursor: selectedNode.id === myNodeId ? 'pointer' : 'default',\n                                boxSizing: 'border-box',\n                            }}\n                            onClick={selectedNode.id === myNodeId ? () => handleKeywordRemove(i) : undefined}\n                            >{kw}{i < getKeywords(selectedNode).length - 1 ? ',' : ''}</span>\n                        ))}\n                        {selectedNode.id === myNodeId && getKeywords(selectedNode).length < 3 && (\n                            <>\n                                <input\n                                    value={keywordEdit}\n                                    onChange={e => setKeywordEdit(e.target.value)}\n                                    onKeyDown={e => { if (e.key === 'Enter') handleKeywordAdd(); }}\n                                    style={{\n                                        fontFamily: 'Menlo',\n                                        fontSize: 18,\n                                        border: 'none',\n                                        outline: 'none',\n                                        background: 'none',\n                                        borderBottom: '2px solid #111',\n                                        marginLeft: 8,\n                                        width: 90,\n                                        boxSizing: 'border-box',\n                                    }}\n                                    maxLength={16}\n                                    placeholder=\"+ keyword\"\n                                />\n                                {caretVisible && <span style={{ borderLeft: '2.5px solid #111', height: 24, marginLeft: -2 }} />}\n                            </>\n                        )}\n                    </div>\n                </div>\n            )}\n            {/* Bouton rond noir (photo profil) en bas √† droite, toujours visible si c'est moi */}\n            {myNodeId && (\n                <button\n                    onClick={() => setShowCustomize(v => !v)}\n                    style={{\n                        position: 'fixed',\n                        right: 24,\n                        bottom: 24,\n                        width: 54,\n                        height: 54,\n                        borderRadius: '50%',\n                        background: '#111',\n                        border: 'none',\n                        boxShadow: '0 2px 8px rgba(0,0,0,0.10)',\n                        zIndex: 1100,\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        cursor: 'pointer',\n                        padding: 0\n                    }}\n                    title=\"Personnaliser mon point\"\n                >\n                    {/* Smiley ou ic√¥ne profil */}\n                    <span style={{ color: '#fff', fontSize: 20, fontFamily: 'Menlo' }}>üò∂‚Äçüå´Ô∏è</span>\n                </button>\n            )}\n            {/* Fen√™tre profil perso, d√©cal√©e √† gauche du rond noir */}\n            {showCustomize && (\n                <div\n                    className=\"customize-popup\"\n                    style={{\n                        position: 'fixed',\n                        right: 90,\n                        bottom: 32,\n                        width: 258,\n                        minHeight: 200,\n                        background: 'rgba(255,255,255,0.98)',\n                        borderRadius: 16,\n                        boxShadow: '0 2px 12px rgba(0,0,0,0.08)',\n                        zIndex: 1099,\n                        padding: '28px 24px',\n                        fontFamily: 'Menlo, monospace',\n                        fontSize: 10,\n                        color: '#111',\n                        //display: 'flex',\n                        flexDirection: 'column',\n                        alignItems: 'flex-start',\n                        boxSizing: 'border-box',\n                        gap: 0\n                    }}\n                >\n                    {/* Ligne pseudo */}\n                    <div style={{ display: 'flex', alignItems: 'center', marginBottom: 8, width: '100%' }}>\n                        <span style={{ fontWeight: 700, fontSize: 20, marginRight: 8 }}>&gt; USER/</span>\n                        <input\n                            value={editValue}\n                            onChange={e => {\n                                setEditValue(e.target.value);\n                                if (editingId !== null) {\n                                    setGraphData(gd => ({\n                                        ...gd,\n                                        nodes: gd.nodes.map(n => n.id === editingId ? { ...n, label: e.target.value } : n)\n                                    }));\n                                }\n                            }}\n                            onKeyDown={e => { if (e.key === 'Enter') handleInputBlurOrEnter(); }}\n                            style={{\n                                fontFamily: 'Menlo',\n                                fontWeight: 600,\n                                fontSize: 20,\n                                border: 'none',\n                                outline: 'none',\n                                background: 'none',\n                                borderBottom: '2px solid #111',\n                                color: '#111',\n                                width: 110,\n                                marginRight: 2,\n                                padding: 0,\n                                lineHeight: 1.1,\n                                boxSizing: 'border-box',\n                            }}\n                            maxLength={24}\n                        />\n                        {caretVisible && <span style={{ borderLeft: '2px solid #111', height: 20, marginLeft: -2 }} />}\n                    </div>\n                    {/* Mots-cl√©s avec caret, style sobre et compact */}\n                    <div style={{ width: '100%', marginBottom: 2, display: 'flex', flexWrap: 'wrap', alignItems: 'center', gap: 0 }}>\n                        {getKeywords({ id: myNodeId, ...graphData.nodes.find(n => n.id === myNodeId) }).map((kw, i, arr) => (\n                            <span key={i} style={{\n                                color: '#888',\n                                fontSize: 16,\n                                fontWeight: 600,\n                                marginRight: i < arr.length - 1 ? 2 : 0,\n                                cursor: 'pointer',\n                                borderBottom: '1.5px solid #eee',\n                                marginBottom: 2,\n                                padding: '0 2px',\n                                boxSizing: 'border-box',\n                            }}\n                            onClick={() => handleKeywordRemove(i)}\n                            >{kw}{i < arr.length - 1 ? ',' : ''}</span>\n                        ))}\n                        {getKeywords({ id: myNodeId, ...graphData.nodes.find(n => n.id === myNodeId) }).length < 3 && (\n                            <>\n                                <input\n                                    value={keywordEdit}\n                                    onChange={e => setKeywordEdit(e.target.value)}\n                                    onKeyDown={e => { if (e.key === 'Enter') handleKeywordAdd(); }}\n                                    style={{\n                                        fontFamily: 'Menlo',\n                                        fontSize: 16,\n                                        border: 'none',\n                                        outline: 'none',\n                                        background: 'none',\n                                        borderBottom: '1.5px solid #bbb',\n                                        color: '#bbb',\n                                        width: 80,\n                                        marginLeft: 2,\n                                        padding: 0,\n                                        marginBottom: 2,\n                                        boxSizing: 'border-box',\n                                    }}\n                                    maxLength={16}\n                                    placeholder=\"+ mot-cl√©\"\n                                />\n                                {caretVisible && <span style={{ borderLeft: '1.5px solid #bbb', height: 14, marginLeft: -2 }} />}\n                            </>\n                        )}\n                    </div>\n                </div>\n            )}\n        </>\n    );\n}\n\nexport default FocusGraph;\n"],"names":[],"mappings":"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"}}]
}