{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/ENSAAMA/03_WORK/web_RELATIONS/web_lineslines/app/components/FocusGraph.tsx"],"sourcesContent":["\"use client\"\n\nimport {useEffect, useRef, useState} from \"react\";\nimport ForceGraph3D, { ForceGraphMethods } from \"react-force-graph-3d\";\nimport * as THREE from \"three\";\n\nfunction FocusGraph({data, userIp}) {\n    const fgRef = useRef<ForceGraphMethods>();\n    const [graphData, setGraphData] = useState({nodes: [], links: []});\n    const [editingId, setEditingId] = useState(null);\n    const [editValue, setEditValue] = useState(\"\");\n    const [caretVisible, setCaretVisible] = useState(true);\n    const [dimensions, setDimensions] = useState({ width: 800, height: 600 });\n    const [selectedNode, setSelectedNode] = useState(null);\n    // Keywords state local pour édition (pour ton node)\n    const [keywordEdit, setKeywordEdit] = useState(\"\");\n\n    // Resize listener pour canvas plein écran\n    useEffect(() => {\n        function handleResize() {\n            setDimensions({ width: window.innerWidth, height: window.innerHeight });\n        }\n        handleResize();\n        window.addEventListener('resize', handleResize);\n        return () => window.removeEventListener('resize', handleResize);\n    }, []);\n\n    // Trouver l'id du node de l'utilisateur courant\n    const myNodeId = graphData.nodes.find(n => n.ip === userIp)?.id;\n\n    // Pas de position forcée : on laisse 3D ForceGraph placer les nodes\n    useEffect(() => {\n        try {\n            let parsed = JSON.parse(data);\n            setGraphData(parsed);\n        } catch {\n            setGraphData({nodes: [], links: []});\n        }\n    }, [data]);\n\n    // Toujours cadrer tous les points à l'écran après chaque changement de graphData\n    useEffect(() => {\n        if (fgRef.current) {\n            fgRef.current.zoomToFit(0, 10); // padding réduit à 10px\n        }\n    }, [graphData]);\n\n    // Ajuste la force selon le nombre de nodes (encore plus dense)\n    useEffect(() => {\n        if (!fgRef.current) return;\n        const n = graphData.nodes.length || 1;\n\n        // Distance caméra dynamique, zoom plus fort si peu de points\n        const z = Math.max(-100, Math.min(200, n * 25));\n        fgRef.current.cameraPosition({ x: 0, y: 0, z }, { x: 0, y: 0, z: 0 }, 0);\n\n\n        // Force dynamique, répulsion très faible\n        const charge = fgRef.current.d3Force('charge');\n        if (charge) charge.strength(-Math.max(2, 8 - n));\n        const collide = fgRef.current.d3Force('collide');\n        if (collide) {\n            collide.strength(1);\n            collide.radius(Math.max(2, 8 - n));\n        }\n    }, [graphData]);\n\n    // Caret clignotant : toggle toutes les 300ms, sans toucher au graph\n    useEffect(() => {\n        const interval = setInterval(() => {\n            setCaretVisible(v => !v);\n        }, 300);\n        return () => clearInterval(interval);\n    }, []);\n\n    // Fermer le profil si on clique dans le vide\n    useEffect(() => {\n        function handleClick(e) {\n            // Si le clic n'est pas dans le profil ni sur un node\n            if (!e.target.closest('.profile-popup')) setSelectedNode(null);\n        }\n        window.addEventListener('mousedown', handleClick);\n        return () => window.removeEventListener('mousedown', handleClick);\n    }, []);\n\n    // Custom node: point + nom gros + caret clignotant noir UNIQUEMENT sur le node courant (toujours, même hors édition)\n    function nodeThreeObject(node) {\n        const isMe = node.id === myNodeId;\n        const isEditing = editingId === node.id;\n        const canvas = document.createElement(\"canvas\");\n        canvas.width = 520;\n        canvas.height = 160;\n        const ctx = canvas.getContext(\"2d\");\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        ctx.beginPath();\n        ctx.arc(40, 60, 28, 0, 2 * Math.PI);\n        ctx.fillStyle = isMe ? \"#e22\" : \"#111\";\n        ctx.shadowColor = '#888';\n        ctx.shadowBlur = 8;\n        ctx.fill();\n        ctx.font = \"bold 54px Menlo, monospace\";\n        ctx.fillStyle = \"#111\";\n        ctx.textAlign = \"left\";\n        ctx.textBaseline = \"middle\";\n        const label = isEditing ? editValue : (node.label || node.pseudo || node.id);\n        ctx.fillText(`/user/${label}`, 90, 64);\n        // Caret clignotant noir UNIQUEMENT sur le node courant (toujours)\n        if (isMe && caretVisible) {\n            const textWidth = ctx.measureText(`/user/${label}`).width;\n            ctx.fillStyle = '#111';\n            ctx.fillRect(90 + textWidth + 6, 35, 4, 58);\n        }\n        // Affiche/édite les mots-clés sous le pseudo (grosse ligne)\n        const keywords = node.keywords || [];\n        ctx.font = \"32px Menlo, monospace\";\n        let x = 90;\n        const y = 120;\n        keywords.forEach((kw, i) => {\n            ctx.fillStyle = isMe ? \"#e22\" : \"#444\";\n            ctx.fillText(`#${kw}`, x, y);\n            // Croix de suppression si c'est moi (affichage visuel seulement)\n            if (isMe) {\n                ctx.save();\n                ctx.strokeStyle = \"#e22\";\n                ctx.lineWidth = 3;\n                const crossX = x + ctx.measureText(`#${kw}`).width + 18;\n                const crossY = y - 12;\n                ctx.beginPath();\n                ctx.moveTo(crossX, crossY);\n                ctx.lineTo(crossX + 16, crossY + 24);\n                ctx.moveTo(crossX + 16, crossY);\n                ctx.lineTo(crossX, crossY + 24);\n                ctx.stroke();\n                ctx.restore();\n            }\n            x += ctx.measureText(`#${kw}`).width + (isMe ? 50 : 36);\n        });\n        // Champ d'ajout si c'est moi et <3 keywords (affichage visuel seulement)\n        if (isMe && keywords.length < 3) {\n            ctx.fillStyle = \"#aaa\";\n            ctx.fillText(\"+ mot-clé\", x, y);\n        }\n        const texture = new THREE.CanvasTexture(canvas);\n        const material = new THREE.SpriteMaterial({map: texture});\n        const sprite = new THREE.Sprite(material);\n        sprite.scale.set(22, 7, 1);\n        return sprite;\n    }\n\n    function handleNodeClick(node) {\n        setSelectedNode(node);\n        if (node.id === myNodeId) {\n            setEditingId(node.id);\n            setEditValue(node.label || node.pseudo || node.id);\n            setKeywordEdit(\"\");\n        } else {\n            setEditingId(null);\n        }\n    }\n\n    // Edition du pseudo sur clic (uniquement sur son node)\n    useEffect(() => {\n        if (!editingId || !fgRef.current) return;\n        function onKeyDown(e) {\n            if (e.key === \"Enter\") handleInputBlurOrEnter();\n            else if (e.key === \"Escape\") setEditingId(null);\n            else if (e.key.length === 1) setEditValue(v => v + e.key);\n            else if (e.key === \"Backspace\") setEditValue(v => v.slice(0, -1));\n        }\n        window.addEventListener(\"keydown\", onKeyDown);\n        return () => window.removeEventListener(\"keydown\", onKeyDown);\n    }, [editingId, editValue]);\n\n    async function handleInputBlurOrEnter() {\n        if (editingId !== null) {\n            // Save to API\n            try {\n                await fetch(`/api/users/${editingId}`, {\n                    method: 'PATCH',\n                    body: JSON.stringify({ pseudo: editValue }),\n                    headers: { 'Content-Type': 'application/json' },\n                });\n            } catch (e) {\n                // Optionally handle error\n            }\n            setGraphData(gd => ({\n                ...gd,\n                nodes: gd.nodes.map(n => n.id === editingId ? {...n, label: editValue} : n)\n            }));\n            setEditingId(null);\n        }\n    }\n\n    // Keywords helpers\n    function getKeywords(node) {\n        return node.keywords || [];\n    }\n    async function handleKeywordAdd() {\n        if (!keywordEdit.trim() || !selectedNode) return;\n        const newKeywords = [...(getKeywords(selectedNode)), keywordEdit.trim()].slice(0, 3);\n        try {\n            await fetch(`/api/users/${selectedNode.id}`, {\n                method: 'PATCH',\n                body: JSON.stringify({ keywords: newKeywords }),\n                headers: { 'Content-Type': 'application/json' },\n            });\n        } catch {}\n        setGraphData(gd => ({\n            ...gd,\n            nodes: gd.nodes.map(n =>\n                n.id === selectedNode.id\n                    ? { ...n, keywords: newKeywords }\n                    : n\n            )\n        }));\n        setKeywordEdit(\"\");\n    }\n    async function handleKeywordRemove(idx) {\n        if (!selectedNode) return;\n        const newKeywords = (getKeywords(selectedNode) || []).filter((_, i) => i !== idx);\n        try {\n            await fetch(`/api/users/${selectedNode.id}`, {\n                method: 'PATCH',\n                body: JSON.stringify({ keywords: newKeywords }),\n                headers: { 'Content-Type': 'application/json' },\n            });\n        } catch {}\n        setGraphData(gd => ({\n            ...gd,\n            nodes: gd.nodes.map(n =>\n                n.id === selectedNode.id\n                    ? { ...n, keywords: newKeywords }\n                    : n\n            )\n        }));\n    }\n\n    return (\n        <>\n            <div style={{ position: 'fixed', inset: 0, zIndex: 0, pointerEvents: 'auto' }}>\n                <ForceGraph3D\n                    ref={fgRef}\n                    graphData={graphData}\n                    nodeAutoColorBy=\"group\"\n                    onNodeClick={handleNodeClick}\n                    nodeThreeObject={nodeThreeObject}\n                    backgroundColor=\"rgba(0,0,0,0)\"\n                    width={dimensions.width}\n                    height={dimensions.height}\n                />\n            </div>\n            {/* Ajoute le popup d'édition sous le pseudo */}\n            {selectedNode && (\n                <div\n                    className=\"profile-popup\"\n                    style={{\n                        position: 'fixed',\n                        left: 16,\n                        bottom: 16,\n                        width: 320,\n                        minHeight: 120,\n                        background: 'rgba(255,255,255,0.98)',\n                        borderRadius: 12,\n                        boxShadow: '0 2px 12px rgba(0,0,0,0.08)',\n                        zIndex: 1001,\n                        padding: '28px 24px',\n                        fontFamily: 'Menlo, monospace',\n                        fontSize: 22,\n                        color: '#111',\n                        display: 'flex',\n                        flexDirection: 'column',\n                        alignItems: 'flex-start',\n                    }}\n                >\n                    <div style={{ fontWeight: 700, marginBottom: 12, fontSize: 26 }}>/user/{selectedNode.label || selectedNode.pseudo || selectedNode.id}</div>\n                    <div style={{ marginBottom: 8, fontSize: 20 }}>\n                        <span style={{ fontWeight: 600, fontSize: 20, marginRight: 10 }}>mots-clés :</span>\n                        {getKeywords(selectedNode).map((kw, i) => (\n                            <span key={i} style={{\n                                display: 'inline-block',\n                                background: '#eee',\n                                color: '#111',\n                                borderRadius: 8,\n                                padding: '4px 16px',\n                                marginRight: 10,\n                                marginBottom: 2,\n                                fontSize: 20,\n                                fontWeight: 600,\n                                cursor: selectedNode.id === myNodeId ? 'pointer' : 'default'\n                            }}\n                            onClick={selectedNode.id === myNodeId ? () => handleKeywordRemove(i) : undefined}\n                            >{kw}</span>\n                        ))}\n                        {selectedNode.id === myNodeId && getKeywords(selectedNode).length < 3 && (\n                            <>\n                                <input\n                                    value={keywordEdit}\n                                    onChange={e => setKeywordEdit(e.target.value)}\n                                    onKeyDown={e => { if (e.key === 'Enter') handleKeywordAdd(); }}\n                                    style={{\n                                        fontFamily: 'Menlo',\n                                        fontSize: 20,\n                                        border: 'none',\n                                        outline: 'none',\n                                        background: 'none',\n                                        borderBottom: '2px solid #111',\n                                        marginLeft: 8,\n                                        width: 90\n                                    }}\n                                    maxLength={16}\n                                    placeholder=\"+ keyword\"\n                                />\n                                {caretVisible && <span style={{ borderLeft: '2.5px solid #111', height: 24, marginLeft: -2 }} />}\n                            </>\n                        )}\n                    </div>\n                </div>\n            )}\n        </>\n    );\n}\n\nexport default FocusGraph;\n"],"names":[],"mappings":"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"}}]
}